server:
  port: ${SERVER_PORT:8080}
  forward-headers-strategy: framework
  ssl:
    enabled: ${SERVER_SSL_ENABLED:false}
    certificate: ${SERVER_SSL_CERT:}
    certificate-private-key: ${SERVER_SSL_KEY:}
  servlet:
    session:
      cookie:
        name: ${SESSION_COOKIE_NAME:LYCORIS_SESSION}
        secure: ${SESSION_COOKIE_SECURE:true}
        http-only: ${SESSION_COOKIE_HTTP_ONLY:true}
        same-site: ${SESSION_COOKIE_SAME_SITE:none}
        domain: ${SESSION_COOKIE_DOMAIN:}

spring:
  session:
    store-type: ${SPRING_SESSION_STORE_TYPE:none}
    redis:
      namespace: lycoris:session
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      password: ${REDIS_PASSWORD:}
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 8MB

  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/lycoris}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:asdf1018}

  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
  web:
    resources:
      static-locations: file:${app.upload-dir}/, classpath:/static/

app:
  upload-dir: ${user.dir}/uploads
  cors:
    allowed-origins: ${APP_CORS_ALLOWED_ORIGINS:https://lycoris.online,https://www.lycoris.online,http://localhost:5173,https://localhost:5173}

admin:
  second-password-hash: ${ADMIN_SECOND_PASSWORD_HASH:}

security:
  register-rate-limit:
    redis-enabled: ${REGISTER_RATE_LIMIT_REDIS_ENABLED:true}
    max-attempts: 5
    window-seconds: 600

cache:
  marker:
    redis-enabled: ${MARKER_CACHE_REDIS_ENABLED:true}
    nearby-ttl-seconds: ${MARKER_CACHE_NEARBY_TTL_SECONDS:12}
    viewport-ttl-seconds: ${MARKER_CACHE_VIEWPORT_TTL_SECONDS:10}

logging:
  level:
    org.hibernate.SQL: debug
    org.hibernate.orm.jdbc.bind: trace
